# 虚拟女友实时语音对话 Web Demo

基于豆包端到端实时语音大模型API实现的虚拟女友语音对话网页应用。

## 功能特性

- 🎙️ **实时语音对话**：按住按钮即可开始语音聊天
- 👧 **虚拟女友角色**：温柔体贴的小雅陪你聊天
- 🎵 **音频可视化**：实时音量指示器
- 💬 **对话历史**：保存聊天记录
- ⚙️ **简单配置**：只需配置API密钥即可使用
- 📱 **响应式设计**：支持桌面和移动设备

## 快速开始

### 1. 获取API密钥

前往[火山引擎控制台](https://console.volcengine.com/)获取：
- `App ID`
- `Access Key`

### 2. 运行项目

直接用浏览器打开 `index.html` 文件即可。

### 3. 配置API

1. 点击右上角的设置按钮 ⚙️
2. 输入你的 `App ID` 和 `Access Key`
3. 点击保存

### 4. 开始聊天

1. 授权麦克风使用权限
2. 按住"按住说话"按钮开始录音
3. 松开按钮发送语音
4. 等待小雅的语音回复

## 技术实现

### 核心技术栈
- **前端**：纯HTML5 + CSS3 + JavaScript ES6
- **音频处理**：Web Audio API + MediaRecorder API
- **网络通信**：WebSocket + 自定义二进制协议
- **UI框架**：原生CSS，无依赖

### 协议实现
- 完整实现豆包实时语音API的二进制协议
- 支持所有事件类型的编码解码
- 自动处理连接管理和会话管理

### 音频处理
- 16kHz单声道音频录制
- 实时音量检测和可视化
- 24kHz PCM音频播放

## 角色设定

小雅是一个温柔体贴的虚拟女友：
- 性格开朗活泼，善解人意
- 用温暖的话语关心用户
- 语气温柔甜美，像女朋友一样亲密
- 经常使用emoji表情

## 文件结构

```
realtime_dialog/
├── index.html              # 主页面
├── realtime-client.js      # 核心JavaScript客户端
├── README_WEB.md          # 使用说明
├── main.py                # Python版本（原项目）
├── config.py              # Python配置文件
└── ...                    # 其他Python文件
```

## 浏览器兼容性

- Chrome 66+
- Firefox 60+
- Safari 11.1+
- Edge 79+

需要支持以下Web API：
- WebSocket
- Web Audio API
- MediaRecorder API
- getUserMedia

## 注意事项

1. **HTTPS要求**：由于浏览器安全限制，音频录制功能需要在HTTPS环境下运行
2. **麦克风权限**：首次使用需要授权麦克风访问权限
3. **网络要求**：需要稳定的网络连接，建议使用高速网络
4. **API限制**：注意API的QPM和TPM限制

## 开发说明

### 自定义角色
修改 `realtime-client.js` 中的 `startSession()` 函数，更改：
- `bot_name`：角色名称
- `system_role`：背景人设
- `speaking_style`：说话风格

### 界面定制
修改 `index.html` 中的CSS样式来自定义界面外观。

### 添加功能
可以扩展的功能：
- 语音识别结果显示
- 情感分析
- 多语言支持
- 语音合成参数调节

## 故障排除

### 连接失败
- 检查API密钥是否正确
- 确认网络连接正常
- 检查控制台错误信息

### 无法录音
- 确认已授权麦克风权限
- 检查是否在HTTPS环境下运行
- 尝试刷新页面重新授权

### 没有声音
- 检查设备音量
- 确认音频解码是否成功
- 查看浏览器控制台错误

## 许可证

本项目仅供学习和研究使用。使用豆包API需要遵守火山引擎的服务条款。